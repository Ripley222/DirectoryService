# Directory Service

**Directory Service** — сервис справочников, предназначенный для управления организационной структурой компании.  
Проект реализует работу с подразделениями, локациями и должностями, включая иерархические связи между подразделениями.

## Основные возможности

- Управление подразделениями (CRUD)
- Иерархия подразделений с возможностью смены родителя
- Хранение и обработка иерархий с использованием **PostgreSQL ltree**
- Управление локациями подразделений
- Управление позициями (должностями)
- REST API для взаимодействия с клиентами
- Веб-интерфейс для работы со справочниками

## Архитектура

Проект построен с использованием принципов **DDD (Domain-Driven Design)**:

- Четкое разделение слоев (Domain, Application, Infrastructure, API)
- Доменные модели и бизнес-правила изолированы от инфраструктуры
- Валидация команд и запросов через FluentValidation

## Технологический стек

### Backend
- **C#**
- **ASP.NET Core**
- **Entity Framework Core**
- **Dapper**
- **PostgreSQL**
- **ltree** (для хранения и обработки иерархий)
- **FluentValidation**
- **DDD**

### Frontend
- **React**
- **TypeScript**
- **Axios**
- **TanStack Query (React Query)**

## Основные сущности

### Подразделение (Department)
- Имеет иерархическую структуру
- Может иметь родительское подразделение
- Поддерживает смену родителя с корректным обновлением дерева

### Локация (Location)
- Отражает физическое или логическое местоположение подразделения
- Может быть связана с несколькими подразделениями

### Позиция (Position)
- Описывает должности внутри подразделений
- Используется для формирования штатной структуры

## Работа с иерархией

Для хранения и обработки иерархических данных используется расширение **ltree** PostgreSQL, что позволяет:

- Эффективно получать дочерние и родительские элементы
- Перемещать подразделения внутри дерева
- Выполнять сложные иерархические запросы с высокой производительностью

## API

Сервис предоставляет REST API для выполнения CRUD-операций:

- Создание, получение, обновление и удаление сущностей
- Перемещение подразделений в иерархии
- Получение дерева подразделений

## Frontend

Клиентская часть реализована на React и предоставляет:

- Интерфейс для управления справочниками
- Отображение иерархии подразделений
- Асинхронную работу с сервером через TanStack Query
- Централизованную работу с API через Axios

## Валидация

- Вся входящая информация валидируется на уровне Application слоя
- Используется **FluentValidation** для декларативного описания правил

## Лицензия
Проект распространяется под лицензией MIT
